#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <sys/syscall.h>
#include <stdint.h>

#define FORK_SERVER_FD (4)
#define FORK_REQUEST_PRE_HOSTNAME_LENGTH (30)

long syscall_func(long number, ...);

int _start(void * initial_struct_pointer)
{
    // Consume the fork request data from the socket (all the bytes before the "hostname" field)
    char buf[128];
    syscall_func(__NR_read, FORK_SERVER_FD, buf, FORK_REQUEST_PRE_HOSTNAME_LENGTH);

    // Loop forever
    while (1) { ; }    
}
